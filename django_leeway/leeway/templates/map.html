{% extends "base.html" %}
{% block content %}
<div class="ui container">
  <div class="ui grid">
    <div class="fourteen wide column">
      <div id="map"></div>
    </div>
    <div class="two wide column">
      <h2>Leeway Simulation</h2>
      <p>Please note that only simulations +/- 5 days from now are possible.</p>
      <form method="post">
        <table>
        {% csrf_token %}
        {{ form.as_table }}
        </table>
        <button type="submit">Simulate</button>
      </form>
    </div>
  </div>
</div>
<script type="text/javascript">
  var map = L.map('map').setView([51.505, -0.09], 13);
  L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
  }).addTo(map);
  var circle = L.circle([0, 0], {
    color: 'red',
    radius: 100
  });
  var onMapClick = function onMapClick(event) {
    console.log(event.latlng.lat, event.latlng.lng);
    $("#id_latitude").val(event.latlng.lat);
    $("#id_longitude").val(event.latlng.lng);
    circle
      .setLatLng(event.latlng)
      .addTo(map);
  };
  map.on('click', onMapClick);
</script>
{% endblock %}
